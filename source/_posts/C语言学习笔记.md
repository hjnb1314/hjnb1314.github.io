---
title: C语言学习笔记
categories:
  - 嵌入式学习笔记
top_img: ../img/index.jpg
---

# 一、C语言基础

C语言一经出现就以其功能丰富、表达能力强、灵活方便、应用面广等特点迅速在全世界普及和推广。C语言不但执行效率高而且可移植性好，可以用来开发应用软件、驱动、操作系统等。C语言也是其它众多高级语言的鼻祖语言，所以说学习C语言是进入编程世界的必修课。

## 1、程序：Hello World.

![Hello World.](https://img0.baidu.com/it/u=3932813903,2293022634&fm=253&fmt=auto&app=120&f=JPEG?w=1600&h=800)

运行结果如下：

![Hello World. Result](https://pic4.zhimg.com/80/v2-a5a8a5c65043aca9c5d59f552fb8bcbf_720w.webp)

注：在最新的C标准中，main函数前的类型为int而不是void

## 2、C语言的具体结构

简单来说，一个C程序就是由若干头文件和函数组成。

![C程序结构](https://pic3.zhimg.com/80/v2-372a71d6b6e61c902ad999a6e4a968b2_720w.webp)

`#include <stdio.h>` 就是一条预处理命令，它的作用是通知C语言编译系统在对C程序进行正式编译之前需做一些预处理工作。

函数就是实现代码逻辑的一个小的单元。

## 3、必不可少之主函数

一个C程序有且只有一个主函数，即main函数。

![主函数](https://pic1.zhimg.com/80/v2-e14c66c734d90b294882790a074f21a4_720w.webp)

C程序就是执行主函数里的代码，也可以说这个主函数就是C语言中的唯一入口。而main前面的int就是主函数的类型。printf()是格式输出函数，这里就记住它的功能就是在屏幕上输出指定的信息。return是函数的返回值，根据函数类型的不同，返回的值也是不同的。\n是转义字符中的换行符。(注意：C程序一定是从主函数开始执行的)

## 4、良好习惯之规范

一个说明或一个语句占一行，例如：包含头文件、一个可执行语句结束都需要换行。
函数体内的语句要有明显缩进，通常以按一下Tab键为一个缩进。
括号要成对写，如果需要删除的话也要成对删除。
当一句可执行语句结束的时候末尾需要有分号。
代码中所有符号均为英文半角符号。

![规范示例](https://pic4.zhimg.com/80/v2-5318376ad6b18215dcbb6c7a1070f367_720w.webp)

## 5、程序解释——注释

注释是写给程序员看的，不是写给电脑看的。C语言注释方法有两种：

多行注释： /* 注释内容 */
单行注释： //注释一行

## 6、有名有姓的C(标识符)

C语言规定，标识符可以是字母(A～Z，a～z)、数字(0～9)、下划线_组成的字符串，并且第一个字符必须是字母或下划线。在使用标识符时还有注意以下几点：

- 标识符的长度最好不要超过8位，因为在某些版本的C中规定标识符前8位有效，当两个标识符前8位相同时，则被认为是同一个标识符。
- 标识符是严格区分大小写的。例如Hello和hello 是两个不同的标识符。
- 标识符最好选择有意义的英文单词组成做到"见名知意"，不要使用中文。
- 标识符不能是C语言的关键字。想了解更多C语言关键字的知识。

## 7、变量及赋值

变量就是可以变化的量，而每个变量都会有一个名字（标识符）。变量占据内存中一定的存储单元。使用变量之前必须先定义变量，要区分变量名和变量值是两个不同的概念。

![变量定义](https://pic1.zhimg.com/80/v2-48eb67c542cf28a51ad0e0ad822d0fe0_720w.webp)

变量定义的一般形式为：`数据类型 变量名;` 多个类型相同的变量：`数据类型 变量名, 变量名, 变量名…;` 注意:在定义中不允许连续赋值，如`int a=b=c=5;`是不合法的。

变量的赋值分为两种方式:

- 先声明再赋值
- 声明的同时赋值

## 8、基本数据类型

C语言中，数据类型可分为：

- 基本数据类型
- 构造数据类型
- 指针类型
- 空类型四大类

![基本数据类型](https://pic2.zhimg.com/80/v2-e8b7aee25427dc62e4c9376a67504b35_720w.webp)

最常用的整型、实型与字符型(char,int,float,double):

![整型数据](https://pic2.zhimg.com/80/v2-51c2a850b2efb39b4cbf624ec7be8131_720w.webp)

整型数据是指不带小数的数字(int,short int,long int, unsigned int, unsigned short int,unsigned long int):

![整型数据](https://pic4.zhimg.com/80/v2-3cd6096a12ef0c4a54b6013a7b3a5ee7_720w.webp)

注：C语言中不存在字符串变量，字符串只能存在字符数组中，这个后面会讲。


## 9、格式化输出语句

格式化输出语句，也可以说是占位输出，是将各种类型的数据按照格式化后的类型及指定的位置从计算机上显示。

其格式为：printf("输出格式符"，输出项);

printf("普通字符输出格式符", 输出项);

![格式化输出示例](https://pic1.zhimg.com/80/v2-e4ccb0ba3c5d2c80e2907c7462c82908_720w.webp)

注意：格式符的个数要与变量、常量或者表达式的个数一一对应

## 10、不可改变的常量

在程序执行过程中，值不发生改变的量称为常量。

C语言的常量可以分为直接常量和符号常量。

直接常量也称为字面量，是可以直接拿来使用，无需说明的量，比如：

- 整型常量：13、0、-13；
- 实型常量：13.33、-24.4；
- 字符常量：‘a’、‘M’；
- 字符串常量：”I love China!”


在C语言中，可以用一个标识符来表示一个常量，称之为符号常量。符号常量在使用之前必须先定义，其一般形式为：

```
#define 标识符 常量值
```

符号常量不可以被改变。

## 11、自动类型转换

数据类型存在自动转换的情况。自动转换发生在不同数据类型运算时，在编译的时候自动完成。

char类型数据转换为int类型数据遵循ASCII码中的对应值。

注：

- 字节小的可以向字节大的自动转换，但字节大的不能向字节小的自动转换。
- char可以转换为int，int可以转换为double，char可以转换为double。但是不可以反向。

## 12、强制类型转换

强制类型转换是通过定义类型转换运算来实现的。其一般形式为：

(数据类型) (表达式)

其作用是把表达式的运算结果强制转换成类型说明符所表示的类型

在使用强制转换时应注意以下问题：

- 数据类型和表达式都必须加括号，如把(int)(x/2+y)写成(int)x/2+y则成了把x转换成int型之后再除2再与y相加了。
- 转换后不会改变原数据的类型及变量值，只在本次运算中临时性转换。
- 强制转换后的运算结果不遵循四舍五入原则。

## 13、运算符号

C语言中的运算符：

- 算术运算符
- 赋值运算符
- 关系运算符
- 逻辑运算符
- 三目运算符

### 算术运算符

![算术运算符](https://pic1.zhimg.com/80/v2-a42efcd9d34f3fd43c838db043809a7c_720w.webp)

### 自增与自减运算符

自增运算符为++，其功能是使变量的值自增1。

自减运算符为--，其功能是使变量值自减1。

### 赋值运算符

C语言中赋值运算符分为简单赋值运算符和复合赋值运算符

复合赋值运算符就是在简单赋值符=之前加上其它运算符构成.

例如+=、-=、*=、/=、%=

### 关系运算符

C语言中的关系运算符:

![关系运算符](https://pic3.zhimg.com/80/v2-046425b65e3c1ce3a99f06572569ef38_720w.webp)

### 逻辑运算符

C语言中的逻辑运算符:

![逻辑运算符](https://pic3.zhimg.com/80/v2-deaeb35e4251e84bf8cd47fc1e151826_720w.webp)

### 三目运算符

C语言中的三目运算符：?:，其格式为：

表达式1 ? 表达式2 : 表达式3;

### 运算符优先级比较

各种运算符号的顺序:

![运算符优先级](https://pic3.zhimg.com/80/v2-1409315bd9b7b4f816a2921fa9119882_720w.webp)

优先级别为1的优先级最高，优先级别为10的优先级别最低。

## 14、分支结构之简单if语句

C语言中的分支结构语句中的if条件语句。

简单if语句的基本结构如下：

if(表达式)

{

执行代码块;

}

其语义是：如果表达式的值为真，则执行其后的语句，否则不执行该语句。

注意：if()后面没有分号，直接写{}

## 15、分支结构之简单if-else语句

简单的if-else语句的基本结构:

```
if(表达式)

{

执行代码块1;

}

else

{

执行代码块2;

}

```
语义是: 如果表达式的值为真，则执行代码块1，否则执行代码块2。

注意：

if()后面没有分号，直接写{}, else后面也没有分号，直接写{}

分支结构之多重if-else语句

C语言中多重if-else语

句，其结构如下：

```
if(表达式1)

{

执行代码块1;

}

else if(表达式2)

{

执行代码块2;

}

else if(表达式3)

{

执行代码块3;

}

...

else

{

执行代码块n;

}

```

语义是：依次判断表达式的值，当出现某个值为真时，则执行对应代码块，否则执行代码块n。

注意：当某一条件为真的时候，则不会向下执行该分支结构的其他语句。

## 16、分支结构之嵌套if-else语句

C语言中嵌套if-else语句。嵌套if-else语句的意思，就是在if-else语句中，再写if-else语句。其一般形式为：

## 17、循环结构之while循环

反复不停的执行某个动作就是江湖人称的循环 。

C语言中有三种循环结构,先看一下C语言while循环的结构

其中表达式表示循环条件，执行代码块为循环体。

while语句的语义是：计算表达式的值，当值为真(非0)时， 执行循环体代码块。

while语句中的表达式一般是关系表达或逻辑表达式，当表达式的值为假时不执行循环体，反之则循环体一直执行。

一定要记着在循环体中改变循环变量的值，否则会出现死循环（无休止的执行）。

循环体如果包括有一个以上的语句，则必须用{}括起来，组成复合语句。

## 18、循环结构之do-while循环

C语言中的do-while循环，一般形式如下：

```
do
{
执行代码块;
} while(表达式);
```

do-while循环语句的语义是:

它先执行循环中的执行代码块，然后再判断while中表达式是否为真，如果为真则继续循环；如果为假，则终止循环。因此，do-while循环至少要执行一次循环语句。

注意：使用do-while结构语句时，while括号后必须有分号。

## 19、循环结构之for循环(一)

c语言中for循环一般形式：

```
for(表达式1; 表达式2; 表达式3)
{
执行代码块;
}

```


它的执行过程如下：

- 执行表达式1，对循环变量做初始化；
- 判断表达式2，若其值为真(非0)，则执行for循环体中执行代码块，然后向下执行；若其值为假(0)，则结束循环;
- 执行表达式3，(i++)等对于循环变量进行操作的语句；
- 执行for循环中执行代码块后执行第二步；第一步初始化只会执行一次。
- 循环结束，程序继续向下执行。

注意：for循环中的两个分号一定要写

## 20、循环结构之for循环(二)

在for循环中:

- 表达式1是一个或多个赋值语句，它用来控制变量的初始值；
- 表达式2是一个关系表达式，它决定什么时候退出循环；
- 表达式3是循环变量的步进值，定义控制循环变量每循环一次后按什么方式变化。

这三部分之间用分号 ; 分开。

使用for语句应该注意：

- for循环中的“表达式1、2、3”均可不写为空，但两个分号(;;)不能缺省。
- 省略“表达式1（循环变量赋初值）”，表示不对循环变量赋初始值。
- 省略“表达式2(循环条件)”，不做其它处理，循环一直执行（死循环）。
- 省略“表达式3(循环变量增减量)”，不做其他处理，循环一直执行（死循环）。
- 表达式1可以是设置循环变量的初值的赋值表达式，也可以是其他表达式。
- 表达式1和表达式3可以是一个简单表达式也可以是多个表达式以逗号分割。

## 21、循环结构之三种循环比较

while, do-while和for三种循环在具体的使用场合上是有区别的，如下：

在知道循环次数的情况下更适合使用for循环;

在不知道循环次数的情况下适合使用while或者do-while循环:

- 如果有可能一次都不循环应考虑使用while循环
- 如果至少循环一次应考虑使用do-while循环。

但是从本质上讲，while,do-while和for循环之间是可以相互转换的。

## 22、循环结构之多重循环

多重循环就是在循环结构的循环体中又出现循环结构。

在实际开发中一般最多用到三层重循环。

因为循环层数越多，运行时间越长，程序越复杂，所以一般用2-3层多重循环就可以了。另外不同循环之间也是可以嵌套的。

多重循环在执行的过程中，外层循环为父循环，内层循环为子循环，

**父循环一次，子循环需要全部执行完，直到跳出循环。**父循环再进入下一次，子循环继续执行…
